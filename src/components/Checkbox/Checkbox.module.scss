@use '../../styles/Variables.scss' as *;
@use '../../styles/mixins.scss' as *;

// ===== BASE CHECKBOX STYLES =====

.unifiedCheckbox {
	@include form-control;
	@include interactive-element;

	display: inline-flex;
	align-items: center;
	gap: var(--spacing-xs);
	cursor: pointer;
	user-select: none;
	transition: var(--transition-standard);

	&.disabled {
		@include disabled-state;
	}

	&.animated {
		transition: var(--transition-smooth);
	}
}

// ===== CHECKBOX INPUT BASE =====

.checkboxInput {
	@include checkbox-input;
	@include focus-visible;

	position: relative;
	appearance: none;
	inline-size: 20px;
	block-size: 20px;
	border: var(--border-thick) solid var(--gray-300);
	background: var(--surface-primary);
	cursor: pointer;
	transition: var(--transition-standard);

	&:checked {
		background: var(--primary-500);
		border-color: var(--primary-500);
	}

	&:checked::after {
		content: 'âœ“';
		position: absolute;
		inset-block-start: 50%;
		inset-inline-start: 50%;
		transform: translate(-50%, -50%);
		color: var(--surface-primary);
		font-size: var(--text-sm);
		font-weight: var(--font-weight-bold);
	}

	&:focus-visible {
		@include focus-ring;
	}

	&:hover:not(:disabled) {
		border-color: var(--primary-500);
	}
}

// ===== CHECKBOX VARIANTS =====

.checkbox-default {
	.checkboxInput {
		border-radius: var(--radius-xs);
	}
}

.checkbox-toggle {
	.checkboxInput {
		@include toggle-switch;
		inline-size: 48px;
		block-size: 24px;
		border-radius: 24px;
		position: relative;
		background: var(--gray-200);
		border: none;

		&::after {
			content: '';
			position: absolute;
			inset-block-start: 2px;
			inset-inline-start: 2px;
			inline-size: 20px;
			block-size: 20px;
			background: var(--surface-primary);
			border-radius: 50%;
			transition: transform var(--transition-standard);
			box-shadow: var(--shadow-sm);
		}

		&:checked {
			background: var(--primary-500);

			&::after {
				transform: translateX(24px);
			}
		}
	}
}

.checkbox-switch {
	.checkboxInput {
		@include toggle-switch;
		inline-size: 44px;
		block-size: 24px;
		border-radius: 24px;
		background: var(--gray-200);
		border: none;
		position: relative;

		&::after {
			content: '';
			position: absolute;
			inset-block-start: 2px;
			inset-inline-start: 2px;
			inline-size: 20px;
			block-size: 20px;
			background: var(--surface-primary);
			border-radius: 50%;
			transition: all var(--transition-standard);
			box-shadow: var(--shadow-sm);
		}

		&:checked {
			background: var(--primary-500);

			&::after {
				transform: translateX(20px);
			}
		}
	}
}

// ===== DARK MODE TOGGLE SPECIFIC =====

.dark-mode-toggle {
	.checkboxInput {
		@include icon-button;
		inline-size: 48px;
		block-size: 48px;
		border-radius: 50%;
		background: none;
		border: none;
		font-size: var(--text-xl);
		display: flex;
		align-items: center;
		justify-content: center;
		transition: background var(--transition-standard);

		&:hover {
			background: var(--gray-100);
		}

		&::after {
			content: attr(data-icon);
			font-size: var(--text-xl);
			color: inherit;
			position: static;
			transform: none;
		}

		&:checked {
			background: none;

			&:hover {
				background: var(--gray-700);
			}
		}
	}
}

// ===== SIZE VARIANTS =====

.size-small {
	.checkboxInput {
		inline-size: 16px;
		block-size: 16px;
		font-size: var(--text-xs);
	}

	&.checkbox-toggle .checkboxInput,
	&.checkbox-switch .checkboxInput {
		inline-size: 36px;
		block-size: 18px;

		&::after {
			inline-size: 14px;
			block-size: 14px;
		}
	}

	&.checkbox-toggle .checkboxInput:checked::after {
		transform: translateX(18px);
	}

	&.checkbox-switch .checkboxInput:checked::after {
		transform: translateX(18px);
	}
}

.size-large {
	.checkboxInput {
		inline-size: 24px;
		block-size: 24px;
		font-size: var(--text-base);
	}

	&.checkbox-toggle .checkboxInput,
	&.checkbox-switch .checkboxInput {
		inline-size: 56px;
		block-size: 28px;

		&::after {
			inline-size: 24px;
			block-size: 24px;
		}
	}

	&.checkbox-toggle .checkboxInput:checked::after {
		transform: translateX(28px);
	}

	&.checkbox-switch .checkboxInput:checked::after {
		transform: translateX(28px);
	}

	&.dark-mode-toggle .checkboxInput {
		inline-size: 56px;
		block-size: 56px;
		font-size: var(--text-2xl);
	}
}

// ===== CHECKBOX LABEL =====

.checkboxLabel {
	@include typography-body-sm;
	color: var(--text-primary);
	font-weight: var(--font-weight-medium);
	line-height: var(--line-height-normal);

	&.disabled {
		color: var(--text-disabled);
	}
}

// ===== ERROR AND HELPER TEXT =====

.errorText {
	@include error-text;
	font-size: var(--text-xs);
	color: var(--error-500);
	margin-block-start: var(--spacing-xs);
}

.helperText {
	@include helper-text;
	font-size: var(--text-xs);
	color: var(--text-secondary);
	margin-block-start: var(--spacing-xs);
}

// ===== FULL WIDTH =====

.fullWidth {
	@include full-width;

	.unifiedCheckbox {
		inline-size: 100%;
	}
}

// ===== VARIANT COLOR STYLES =====

.variant-success {
	.checkboxInput:checked {
		background: var(--success-500);
		border-color: var(--success-500);
	}

	&.checkbox-toggle .checkboxInput:checked,
	&.checkbox-switch .checkboxInput:checked {
		background: var(--success-500);
	}
}

.variant-warning {
	.checkboxInput:checked {
		background: var(--warning-500);
		border-color: var(--warning-500);
	}

	&.checkbox-toggle .checkboxInput:checked,
	&.checkbox-switch .checkboxInput:checked {
		background: var(--warning-500);
	}
}

.variant-danger {
	.checkboxInput:checked {
		background: var(--error-500);
		border-color: var(--error-500);
	}

	&.checkbox-toggle .checkboxInput:checked,
	&.checkbox-switch .checkboxInput:checked {
		background: var(--error-500);
	}
}

// ===== STYLING MODIFIERS =====

.rounded {
	.checkboxInput {
		border-radius: 50%;
	}
}

.shadow {
	.checkboxInput {
		box-shadow: var(--shadow-sm);

		&:checked {
			box-shadow: var(--shadow-md);
		}
	}
}

.bordered {
	.checkboxInput {
		border-width: var(--border-thick);
	}
}

// ===== RESPONSIVE STYLES =====

@media (max-width: 768px) {
	.unifiedCheckbox {
		gap: var(--spacing-xs);
	}

	.checkboxLabel {
		font-size: var(--text-xs);
	}

	.size-large .checkboxInput {
		inline-size: 20px;
		block-size: 20px;
	}

	.size-large.dark-mode-toggle .checkboxInput {
		inline-size: 48px;
		block-size: 48px;
		font-size: var(--text-xl);
	}
}
