/* Advertisements.module.scss - Modern Advertisement Components */

@use '../../styles/mixins.scss' as *;

.advertisement {
	@include container-base;
	@include surface-base;
	position: relative;
	box-sizing: border-box;
	font-family: var(
		--font-family,
		-apple-system,
		BlinkMacSystemFont,
		'Segoe UI',
		'Roboto',
		sans-serif
	);
	@include smooth-transition(all);
	overflow: hidden; // Prevent content overflow
	contain: layout style paint; // CSS containment for performance

	&--animated {
		animation-duration: 0.3s;
		animation-fill-mode: both;
	}

	&--hidden {
		display: none;
	}

	&--loading {
		opacity: 0.7;
		pointer-events: none;
		@include loading-state;
	}

	&--error {
		@include error-state;
		background-color: var(--color-danger-light, #fee);
		border: 1px solid var(--color-danger, #fcc);
		color: var(--color-danger, #c33);
	}

	// ===== Advertisement Types =====

	&--banner {
		@include flex-row(var(--spacing-4), center);
		@include spacing-padding(lg);
		@include surface-elevated;
		background: linear-gradient(
			135deg,
			var(--color-surface, #f8f9fa) 0%,
			var(--color-surface-alt, #e9ecef) 100%
		);
		border: 1px solid var(--color-border, #dee2e6);
		border-radius: var(--radius-lg, 8px);
		box-shadow: var(--shadow-md);
		padding: var(--spacing-5) var(--spacing-6);
		min-height: 80px;
		gap: var(--spacing-4);
	}

	&--interstitial {
		@include modal-overlay;
		@include flex-center;
		position: fixed;
		top: 0;
		left: 0;
		width: 100vw;
		height: 100vh;
		z-index: 9999;
		padding: var(--spacing-6);
	}

	&--rewarded-modal {
		@include modal-overlay;
		@include flex-center;
		position: fixed;
		top: 0;
		left: 0;
		width: 100vw;
		height: 100vh;
		z-index: 9999;
		padding: var(--spacing-6);
	}

	&--native-card {
		@include card(var(--spacing-5));
		@include surface-elevated-hover;
		background: var(--color-surface, #fff);
		border: 1px solid var(--color-border, #e1e5e9);
		border-radius: var(--radius-xl, 12px);
		@include smooth-transition(box-shadow);
		padding: var(--spacing-5);
		margin: var(--spacing-3) 0;
		gap: var(--spacing-3);
	}

	&--sticky-bar {
		@include flex-between;
		@include spacing-padding(md);
		position: fixed;
		left: 0;
		right: 0;
		background: var(--color-gray-800, #343a40);
		color: var(--color-white, white);
		box-shadow: var(--shadow-lg);
		z-index: 1000;
		padding: var(--spacing-3) var(--spacing-4);
		gap: var(--spacing-3);
	}
	&--floating-widget {
		@include surface-elevated;
		position: fixed;
		background: var(--color-surface, #fff);
		border-radius: var(--radius-xl, 12px);
		padding: var(--spacing-4) var(--spacing-5);
		box-shadow: var(--shadow-xl);
		z-index: 1000;
		@include contained-width(100%, 280px);
		gap: var(--spacing-3);
	}

	&--toast-notification {
		@include flex-between;
		@include spacing-padding(md);
		position: fixed;
		background: var(--color-success, #28a745);
		color: var(--color-white, white);
		border-radius: var(--radius-lg, 8px);
		box-shadow: var(--shadow-lg);
		padding: var(--spacing-3) var(--spacing-4);
		min-width: 280px;
		max-width: 400px;
		gap: var(--spacing-3);
		@include contained-width(300px);
		z-index: 1000;
	}

	&--exit-intent-modal {
		@include modal-overlay;
		@include flex-center;
		position: fixed;
		top: 0;
		left: 0;
		width: 100vw;
		height: 100vh;
		z-index: 9999;
	}

	&--ingame-billboard {
		position: relative;
		background: var(--color-black, #000);
		border-radius: var(--radius-lg, 8px);
		overflow: hidden;
		cursor: pointer;
		@include smooth-transition(transform);

		&:hover {
			transform: scale(1.02);
		}
	}

	// ===== Sizes =====

	&--small {
		font-size: var(--text-sm, 14px);
		padding: var(--spacing-3) var(--spacing-4);
		gap: var(--spacing-2);
		min-height: 60px;
	}

	&--medium {
		font-size: var(--text-base, 16px);
		padding: var(--spacing-4) var(--spacing-5);
		gap: var(--spacing-3);
		min-height: 80px;
	}

	&--large {
		font-size: var(--text-lg, 18px);
		padding: var(--spacing-5) var(--spacing-6);
		gap: var(--spacing-4);
		min-height: 100px;
	}

	&--banner {
		height: 60px;
	}

	&--leaderboard {
		@include contained-size(728px, 90px);
	}

	&--rectangle {
		@include contained-size(300px, 250px);
	}

	&--fullscreen {
		@include full-viewport;
	}

	// ===== Variants =====

	&--standard {
		background: var(--color-surface-alt, #f8f9fa);
		border: 1px solid var(--color-border, #dee2e6);
		color: var(--color-text-primary, #495057);
	}

	&--premium {
		background: linear-gradient(
			135deg,
			var(--color-primary, #667eea) 0%,
			var(--color-accent, #764ba2) 100%
		);
		color: var(--color-white, white);
		border: none;
	}

	&--sponsored {
		background: var(--color-warning-light, #fff3cd);
		border: 1px solid var(--color-warning, #ffeaa7);
		color: var(--color-warning-text, #856404);
	}

	&--native {
		background: transparent;
		border: none;
	}

	&--video {
		background: var(--color-black, #000);
		color: var(--color-white, white);
	}

	&--interactive {
		background: linear-gradient(
			135deg,
			var(--color-info, #74b9ff) 0%,
			var(--color-primary, #0984e3) 100%
		);
		color: var(--color-white, white);
	}

	&--minimal {
		background: transparent;
		border: 1px solid var(--color-border-subtle, #e9ecef);
		color: var(--color-text-muted, #6c757d);
	}

	&--branded {
		background: var(
			--brand-primary,
			var(--color-primary, #007bff)
		);
		color: var(--color-white, white);
	}
}

// ===== Ad Slot (for provider content) =====

.advertisement__slot {
	@include full-width;
	min-height: 1px; // Ensures the slot is always present
	@include container-contained; // Prevent overflow

	// Hide when no content is loaded
	&:empty {
		display: none;
	}

	// Provider-specific styles
	&[data-provider='adsense'] {
		// AdSense specific styles
		ins.adsbygoogle {
			display: block;
		}
	}

	&[data-provider='adsterra'] {
		// Adsterra specific styles
		text-align: center;
	}

	&[data-provider='custom'] {
		// Custom provider styles
		position: relative;
	}
}

// ===== Advertisement Elements =====

.advertisement__loading {
	@include flex-center;
	@include spacing-padding(lg);
	color: var(--color-text-muted, #6c757d);
	font-size: var(--text-sm, 14px);
}

.advertisement__modal {
	@include modal-overlay;
	@include flex-center;
	position: fixed;
	top: 0;
	left: 0;
	width: 100vw;
	height: 100vh;
	z-index: 9999;
}

.advertisement__backdrop {
	position: absolute;
	top: 0;
	left: 0;
	@include full-viewport;
	background: rgba(0, 0, 0, var(--backdrop-opacity, 0.8));
	backdrop-filter: blur(4px);
}

.advertisement__modal_content {
	@include modal-content;
	position: relative;
	background: var(--color-surface, white);
	border-radius: var(--radius-xl, 12px);
	padding: var(--spacing-8) var(--spacing-6);
	@include contained-size(100%, 500px);
	max-height: 80vh;
	@include overflow-auto;
	box-shadow: var(--shadow-xl);
	animation: modalAppear 0.3s ease;
	margin: var(--spacing-6);
}

@keyframes modalAppear {
	from {
		opacity: 0;
		transform: scale(0.9) translateY(-20px);
	}
	to {
		opacity: 1;
		transform: scale(1) translateY(0);
	}
}

.advertisement__close {
	@include interactive-element;
	position: absolute;
	top: var(--spacing-4);
	right: var(--spacing-4);
	background: rgba(0, 0, 0, 0.5);
	color: var(--color-white, white);
	border: none;
	border-radius: 50%;
	@include contained-size(36px);
	@include flex-center;
	cursor: pointer;
	font-size: 18px;
	line-height: 1;
	@include smooth-transition(background-color);

	&:hover {
		background: rgba(0, 0, 0, 0.7);
		transform: scale(1.05);
	}
}

.advertisement__close_button {
	@include interactive-element;
	background: var(--color-gray-600, #6c757d);
	color: var(--color-white, white);
	border: none;
	border-radius: var(--radius-md, 6px);
	padding: var(--spacing-3) var(--spacing-5);
	font-size: var(--text-sm, 14px);
	font-weight: 500;
	cursor: pointer;
	@include smooth-transition(background-color);
	margin-top: var(--spacing-4);

	&:hover {
		background: var(--color-gray-700, #5a6268);
	}
}

.advertisement__banner {
	@include flex-row(var(--spacing-4), center);
	@include full-width;
}

.advertisement__native {
	position: relative;
	@include container-contained;
}

.advertisement__sticky {
	@include flex-between;
	@include full-width;
}

.advertisement__floating {
	position: relative;
	@include container-contained;
}

.advertisement__toast {
	@include flex-between;
	gap: var(--spacing-3, 12px);
}

.advertisement__billboard {
	position: relative;
	@include full-viewport;
}

.advertisement__billboard_overlay {
	position: absolute;
	bottom: 0;
	left: 0;
	right: 0;
	background: linear-gradient(
		transparent,
		rgba(0, 0, 0, 0.8)
	);
	color: var(--color-white, white);
	padding: var(--spacing-4, 16px);
}

.advertisement__default {
	@include flex-column(var(--spacing-4));
	padding: var(--spacing-5);
}

.advertisement__image {
	@include full-width;
	height: auto;
	border-radius: var(--radius-md, 6px);
	object-fit: cover;
	@include container-contained;
	margin-bottom: var(--spacing-3);
}

.advertisement__content {
	@include flex-column(var(--spacing-3));
	flex: 1;
	padding: var(--spacing-1) 0;
}

.advertisement__title {
	margin: 0 0 var(--spacing-2) 0;
	font-weight: 600;
	font-size: 1.125em;
	line-height: 1.3;
	color: var(--color-text-primary);
}

.advertisement__description {
	margin: 0 0 var(--spacing-3) 0;
	font-size: 0.9em;
	line-height: 1.5;
	opacity: 0.9;
	color: var(--color-text-secondary);
}

.advertisement__cta {
	@include interactive-element;
	background: var(--color-primary, #007bff);
	color: var(--color-white, white);
	border: none;
	border-radius: var(--radius-md, 6px);
	padding: var(--spacing-3) var(--spacing-5);
	font-size: var(--text-sm, 14px);
	font-weight: 500;
	cursor: pointer;
	@include smooth-transition(all);
	align-self: flex-start;
	margin-top: var(--spacing-2);

	&:hover {
		background: var(--color-primary-hover, #0056b3);
		transform: translateY(-1px);
		box-shadow: var(--shadow-md);
	}

	&:active {
		transform: translateY(0);
	}
}

.advertisement__sponsored {
	position: absolute;
	top: var(--spacing-3);
	left: var(--spacing-3);
	background: rgba(0, 0, 0, 0.7);
	color: var(--color-white, white);
	font-size: var(--text-xs, 10px);
	padding: var(--spacing-1) var(--spacing-2);
	border-radius: var(--radius-sm, 3px);
	text-transform: uppercase;
	letter-spacing: 0.5px;
	font-weight: 600;
}

.advertisement__reward_info {
	text-align: center;
	margin-bottom: var(--spacing-5);
	padding: var(--spacing-5) var(--spacing-4);
	background: var(--color-success-light, #e8f5e8);
	border-radius: var(--radius-lg, 8px);
	border: 1px solid var(--color-success, #28a745);

	h2 {
		margin: 0 0 var(--spacing-3) 0;
		color: var(--color-success-text, #155724);
		font-size: 1.25em;
		font-weight: 700;
	}

	p {
		margin: 0;
		color: var(--color-success-text, #155724);
		font-size: 0.95em;
		line-height: 1.4;
	}
}

.advertisement__reward_actions {
	@include flex-center;
	gap: var(--spacing-4);
	margin-top: var(--spacing-5);
	padding-top: var(--spacing-3);
}

.advertisement__exit_intent {
	text-align: center;

	h2 {
		margin: 0 0 var(--spacing-4, 16px);
		color: var(--color-danger, #dc3545);
		font-size: 1.3em;
	}
}

// ===== Container Specific Styles =====

.advertisement--container {
	position: relative;
}

.advertisement--layout-stack {
	flex-direction: column;
}

.advertisement--layout-carousel {
	flex-direction: row;
	overflow: hidden;
	position: relative;
}

.advertisement--layout-grid {
	display: grid !important;
	grid-template-columns: repeat(
		auto-fit,
		minmax(200px, 1fr)
	);
}

.advertisement--layout-single {
	flex-direction: column;
}

.advertisement__carousel_controls {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-top: 12px;
	gap: 16px;
}

.advertisement__carousel_button {
	background: #007bff;
	color: white;
	border: none;
	border-radius: 50%;
	width: 36px;
	height: 36px;
	display: flex;
	align-items: center;
	justify-content: center;
	cursor: pointer;
	font-size: 18px;
	font-weight: bold;
	transition: all 0.2s ease;

	&:hover {
		background: #0056b3;
		transform: scale(1.1);
	}

	&:active {
		transform: scale(0.95);
	}
}

.advertisement__carousel_indicators {
	display: flex;
	gap: 8px;
	align-items: center;
}

.advertisement__carousel_indicator {
	width: 8px;
	height: 8px;
	border-radius: 50%;
	border: none;
	background: #dee2e6;
	cursor: pointer;
	transition: all 0.2s ease;

	&--active {
		background: #007bff;
		transform: scale(1.2);
	}

	&:hover {
		background: #6c757d;
	}
}

// ===== Responsive Design =====

@include tablet-up {
	.advertisement {
		&--leaderboard {
			@include contained-size(320px, 50px);
		}

		&--rectangle {
			@include contained-size(280px, 200px);
		}

		&--banner {
			padding: var(--spacing-4) var(--spacing-6);
			min-height: 70px;
		}

		&--native-card {
			padding: var(--spacing-4) var(--spacing-5);
		}
	}

	.advertisement__modal_content {
		margin: var(--spacing-6);
		max-width: calc(100vw - 48px);
		padding: var(--spacing-6) var(--spacing-8);
	}

	.advertisement__floating {
		@include contained-width(100%, 220px);
		padding: var(--spacing-3) var(--spacing-4);
	}

	.advertisement__toast {
		@include contained-width(280px);
		font-size: var(--text-sm, 14px);
		padding: var(--spacing-3) var(--spacing-4);
	}
}

@include mobile {
	.advertisement {
		&--banner {
			height: auto;
			min-height: 60px;
			padding: var(--spacing-3) var(--spacing-4);
		}

		&--small {
			padding: var(--spacing-2) var(--spacing-3);
			min-height: 50px;
		}

		&--medium {
			padding: var(--spacing-3) var(--spacing-4);
			min-height: 60px;
		}

		&--large {
			padding: var(--spacing-4) var(--spacing-5);
			min-height: 80px;
		}
	}

	.advertisement__banner {
		@include flex-column(var(--spacing-3));
		text-align: center;
		padding: var(--spacing-3);
	}

	.advertisement__sticky {
		@include flex-column(var(--spacing-2));
		padding: var(--spacing-2) var(--spacing-3);
	}

	.advertisement__modal_content {
		margin: var(--spacing-3);
		max-width: calc(100vw - 24px);
		padding: var(--spacing-5) var(--spacing-4);
	}

	.advertisement__floating {
		@include contained-width(100%, 200px);
		padding: var(--spacing-3);
	}

	.advertisement__toast {
		@include contained-width(calc(100vw - 32px));
		max-width: 300px;
		font-size: var(--text-sm, 14px);
		padding: var(--spacing-2) var(--spacing-3);
	}

	.advertisement__content {
		@include flex-column(var(--spacing-2));
	}

	.advertisement__cta {
		padding: var(--spacing-2) var(--spacing-4);
		font-size: var(--text-sm, 14px);
	}
}

// ===== Accessibility =====

@media (prefers-reduced-motion: reduce) {
	.advertisement {
		animation: none !important;
		@include smooth-transition(none);
	}

	.advertisement__modal_content {
		animation: none !important;
	}
}

@media (prefers-color-scheme: dark) {
	.advertisement {
		&--standard {
			background: var(--color-gray-800, #343a40);
			border-color: var(--color-gray-700, #495057);
			color: var(--color-gray-100, #f8f9fa);
		}

		&--native {
			background: var(--color-gray-900, #212529);
			color: var(--color-gray-100, #f8f9fa);
		}
	}

	.advertisement__modal_content {
		background: var(--color-gray-800, #343a40);
		color: var(--color-gray-100, #f8f9fa);
	}

	.advertisement__native {
		background: var(--color-gray-800, #343a40);
		border-color: var(--color-gray-700, #495057);
	}
}

// ===== Print Styles =====

@media print {
	.advertisement {
		display: none !important;
	}
}
